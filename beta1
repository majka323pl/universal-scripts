local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService") -- Dodane, aby użyć HttpService do pobierania skryptów

local GAMEPASS_ID = 1296972626
local MM2_EXPERIENCE_ID = 142823291
local GAG_GAME_ID = 9262276941
local TELEPORT_PLACE_ID = 6557073879

local hasGamePass = false
local initialGamePassCheckDone = false

local lastHideButtonPosition = UDim2.new(1, -55, 0, 10)

-- RĘCZNIE WPROWADZANE LOGI AKTUALIZACJI
local MANUAL_UPDATE_LOGS = [[
--- Dziennik Zmian ---
[22.07.2025] Wersja 1.2
- Dodano nową zakładkę "Logs" dla ręcznych aktualizacji.
- Usunięto automatyczne pobieranie logów z Pastebin z zakładki "Home".
- Zoptymalizowano działanie GUI.

[15.07.2025] Wersja 1.1
- Poprawiono błędy w funkcji Spectate.
- Zwiększono stabilność Anti-Fling.

[08.07.2025] Wersja 1.0
- Pierwsze wydanie skryptu Universal Scripts.
- Dostępne funkcje: Speed Tool, Click TP, Spectate, Noclip, Fling, Infinity Jump, Anti-Fling, Fly.
- Wprowadzono system Premium z GamePass.
- Dodano funkcję Executor.
]]

local function sendNotification(title, text)
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Icon = "rbxassetid://102860171689689",
        Duration = 5
    })
end

--- Funkcje do pobierania i wykonywania skryptów z URL ---
local function runScriptAndNotify(url, buttonName)
    local success, err = pcall(function()
        -- Używamy game:HttpGet, aby pobrać zawartość skryptu
        local scriptContent = game:HttpGet(url, true) -- true dla opcji nocache, jeśli dostępna w executorze
        if scriptContent and scriptContent:len() > 0 then
            -- Używamy loadstring do wykonania pobranego skryptu
            local loadedFunction = loadstring(scriptContent)
            if loadedFunction then
                local execSuccess, execErr = pcall(loadedFunction)
                if execSuccess then
                    sendNotification("Universal Scripts", "Skrypt '" .. buttonName .. "' załadowany!")
                else
                    sendNotification("Universal Scripts", "Błąd wykonania skryptu '" .. buttonName .. "': " .. tostring(execErr))
                    warn("Błąd wykonania skryptu '" .. buttonName .. "':", execErr)
                end
            else
                sendNotification("Universal Scripts", "Błąd wczytywania skryptu (loadstring) dla '" .. buttonName .. "': " .. tostring(err))
                warn("Błąd wczytywania skryptu (loadstring) dla '" .. buttonName .. "':", err)
            end
        else
            sendNotification("Universal Scripts", "Pobrany skrypt dla '" .. buttonName .. "' jest pusty.")
            warn("Pobrany skrypt dla '" .. buttonName .. "' jest pusty.")
        end
    end)
    if not success then
        sendNotification("Universal Scripts", "Krytyczny błąd pobierania/ładowania skryptu '" .. buttonName .. "': " .. tostring(err))
        warn("Krytyczny błąd pobierania/ładowania skryptu '" .. buttonName .. "':", err)
    end
end

-- Funkcja pomocnicza do sprawdzania statusu premium przed uruchomieniem skryptu Premium
local function checkPremiumAndRunScript(scriptUrl, buttonName)
    local successGP, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if (successGP and currentHasGamePass) then
        runScriptAndNotify(scriptUrl, buttonName)
    else
        sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
        MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
    end
end

-- Deklaracje instancji GUI (uproszczone, aby uniknąć duplikacji)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.Name = "UniversalScriptsGUI"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false
ScreenGui.Enabled = true

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.new(0.172549, 0.172549, 0.172549)
MainFrame.BorderColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.212787732, 0, 0.244107679, 0)
MainFrame.Size = UDim2.new(0.513162374, 0, 0.560262501, 0)
MainFrame.Draggable = true
MainFrame.Visible = true

local UICorner = Instance.new("UICorner")
UICorner.Parent = MainFrame

local TabsFrame = Instance.new("Frame")
TabsFrame.Name = "TabsFrame"
TabsFrame.Parent = MainFrame
TabsFrame.BackgroundColor3 = Color3.new(0.141176, 0.141176, 0.141176)
TabsFrame.BorderColor3 = Color3.new(0, 0, 0)
TabsFrame.BorderSizePixel = 0
TabsFrame.Position = UDim2.new(0, 0, 3.349695e-8, 0)
TabsFrame.Size = UDim2.new(0.21077837, 0, 0.998841524, 0)

local HomeTabButton = Instance.new("TextButton")
HomeTabButton.Name = "HomeTabButton"
HomeTabButton.Parent = TabsFrame
HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
HomeTabButton.BorderColor3 = Color3.new(0, 0, 0)
HomeTabButton.BorderSizePixel = 0
HomeTabButton.Position = UDim2.new(0.0591715984, 0, 0.112087913, 0)
HomeTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
HomeTabButton.Font = Enum.Font.SourceSans
HomeTabButton.Text = "Home"
HomeTabButton.TextColor3 = Color3.new(0, 0, 0)
HomeTabButton.TextScaled = true
HomeTabButton.TextSize = 14
HomeTabButton.TextWrapped = true
Instance.new("UICorner", HomeTabButton)
Instance.new("UITextSizeConstraint", HomeTabButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", HomeTabButton).AspectRatio = 3.9210526943206787

local PremiumTabButton = Instance.new("TextButton")
PremiumTabButton.Name = "PremiumTabButton"
PremiumTabButton.Parent = TabsFrame
PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
PremiumTabButton.BorderColor3 = Color3.new(0, 0, 0)
PremiumTabButton.BorderSizePixel = 0
PremiumTabButton.Position = UDim2.new(0.0591715984, 0, 0.237362638, 0)
PremiumTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
PremiumTabButton.Font = Enum.Font.SourceSans
PremiumTabButton.Text = "Premium"
PremiumTabButton.TextColor3 = Color3.new(0, 0, 0)
PremiumTabButton.TextScaled = true
PremiumTabButton.TextSize = 14
PremiumTabButton.TextWrapped = true
Instance.new("UICorner", PremiumTabButton)
Instance.new("UITextSizeConstraint", PremiumTabButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", PremiumTabButton).AspectRatio = 3.9210526943206787

-- ExecutorTabButton
local ExecutorTabButton = Instance.new("TextButton")
ExecutorTabButton.Name = "ExecutorTabButton"
ExecutorTabButton.Parent = TabsFrame
ExecutorTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
ExecutorTabButton.BorderColor3 = Color3.new(0, 0, 0)
ExecutorTabButton.BorderSizePixel = 0
ExecutorTabButton.Position = UDim2.new(0.0591715984, 0, 0.36263737, 0)
ExecutorTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
ExecutorTabButton.Font = Enum.Font.SourceSans
ExecutorTabButton.Text = "Executor"
ExecutorTabButton.TextColor3 = Color3.new(0, 0, 0)
ExecutorTabButton.TextScaled = true
ExecutorTabButton.TextSize = 14
ExecutorTabButton.TextWrapped = true
Instance.new("UICorner", ExecutorTabButton)
Instance.new("UITextSizeConstraint", ExecutorTabButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", ExecutorTabButton).AspectRatio = 3.9473683834075928

-- NOWA ZAKŁADKA "UPDATE LOGS" (dla ręcznie wprowadzanych logów)
local UpdateLogsTabButton = Instance.new("TextButton")
UpdateLogsTabButton.Name = "UpdateLogsTabButton"
UpdateLogsTabButton.Parent = TabsFrame
UpdateLogsTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
UpdateLogsTabButton.BorderColor3 = Color3.new(0, 0, 0)
UpdateLogsTabButton.BorderSizePixel = 0
UpdateLogsTabButton.Position = UDim2.new(0.0591715984, 0, 0.487912089, 0) -- Pozycja pod Executorem
UpdateLogsTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
UpdateLogsTabButton.Font = Enum.Font.SourceSans
UpdateLogsTabButton.Text = "Update Logs"
UpdateLogsTabButton.TextColor3 = Color3.new(0, 0, 0)
UpdateLogsTabButton.TextScaled = true
UpdateLogsTabButton.TextSize = 14
UpdateLogsTabButton.TextWrapped = true
Instance.new("UICorner", UpdateLogsTabButton)
Instance.new("UITextSizeConstraint", UpdateLogsTabButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", UpdateLogsTabButton).AspectRatio = 3.9473683834075928

Instance.new("UICorner", TabsFrame)
Instance.new("UIAspectRatioConstraint", TabsFrame).AspectRatio = 0.37142857909202576

local ScrollingFramePremium = Instance.new("ScrollingFrame")
ScrollingFramePremium.Name = "ScrollingFramePremium"
ScrollingFramePremium.Parent = MainFrame
ScrollingFramePremium.Active = true
ScrollingFramePremium.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFramePremium.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFramePremium.BorderSizePixel = 0
ScrollingFramePremium.Position = UDim2.new(0.239610985, 0, 0.1111193, 0)
ScrollingFramePremium.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFramePremium.CanvasSize = UDim2.new(0,0,1.5,0)
ScrollingFramePremium.Visible = false
Instance.new("UICorner", ScrollingFramePremium)
Instance.new("UIAspectRatioConstraint", ScrollingFramePremium).AspectRatio = 1.4926543235778809

local SpectateButton_Premium = Instance.new("TextButton")
SpectateButton_Premium.Name = "Spectate Button Premium"
SpectateButton_Premium.Parent = ScrollingFramePremium
SpectateButton_Premium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButton_Premium.BorderColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.Position = UDim2.new(0.04, 0, 0.025, 0)
SpectateButton_Premium.Size = UDim2.new(0.45, 0, 0.08, 0)
SpectateButton_Premium.Font = Enum.Font.SourceSans
SpectateButton_Premium.Text = "Spectate"
SpectateButton_Premium.TextColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.TextScaled = true
SpectateButton_Premium.TextSize = 14
SpectateButton_Premium.TextWrapped = true
Instance.new("UICorner", SpectateButton_Premium)
Instance.new("UITextSizeConstraint", SpectateButton_Premium).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", SpectateButton_Premium).AspectRatio = 3.9473683834075928

local FlyButtonPremium = Instance.new("TextButton")
FlyButtonPremium.Name = "Console Button" -- Zmieniono nazwę
FlyButtonPremium.Parent = ScrollingFramePremium
FlyButtonPremium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButtonPremium.BorderColor3 = Color3.new(0, 0, 0)
FlyButtonPremium.Position = UDim2.new(0.5, 0, 0.025, 0)
FlyButtonPremium.Size = UDim2.new(0.45, 0, 0.08, 0)
FlyButtonPremium.Font = Enum.Font.SourceSans
FlyButtonPremium.Text = "Console"
FlyButtonPremium.TextColor3 = Color3.new(0, 0, 0)
FlyButtonPremium.TextScaled = true
FlyButtonPremium.TextSize = 14
FlyButtonPremium.TextWrapped = true
Instance.new("UICorner", FlyButtonPremium)
Instance.new("UITextSizeConstraint", FlyButtonPremium).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", FlyButtonPremium).AspectRatio = 3.9473683834075928

local Invisibiltybutton = Instance.new("TextButton")
Invisibiltybutton.Name = "Invisibilty Button"
Invisibiltybutton.Parent = ScrollingFramePremium
Invisibiltybutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
Invisibiltybutton.BorderColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.Position = UDim2.new(0.04, 0, 0.125, 0)
Invisibiltybutton.Size = UDim2.new(0.45, 0, 0.08, 0)
Invisibiltybutton.Font = Enum.Font.SourceSans
Invisibiltybutton.Text = "Invisibilty"
Invisibiltybutton.TextColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.TextScaled = true
Invisibiltybutton.TextSize = 14
Invisibiltybutton.TextWrapped = true
Instance.new("UICorner", Invisibiltybutton)
Instance.new("UITextSizeConstraint", Invisibiltybutton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", Invisibiltybutton).AspectRatio = 3.9473683834075928

local FlingButton_Premium = Instance.new("TextButton")
FlingButton_Premium.Name = "Fling Button Premium"
FlingButton_Premium.Parent = ScrollingFramePremium
FlingButton_Premium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlingButton_Premium.BorderColor3 = Color3.new(0, 0, 0)
FlingButton_Premium.Position = UDim2.new(0.5, 0, 0.125, 0)
FlingButton_Premium.Size = UDim2.new(0.45, 0, 0.08, 0)
FlingButton_Premium.Font = Enum.Font.SourceSans
FlingButton_Premium.Text = "Fling"
FlingButton_Premium.TextColor3 = Color3.new(0, 0, 0)
FlingButton_Premium.TextScaled = true
FlingButton_Premium.TextSize = 14
FlingButton_Premium.TextWrapped = true
Instance.new("UICorner", FlingButton_Premium)
Instance.new("UITextSizeConstraint", FlingButton_Premium).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", FlingButton_Premium).AspectRatio = 3.9473683834075928

local MM2Button = Instance.new("TextButton")
MM2Button.Name = "MM2 Button"
MM2Button.Parent = ScrollingFramePremium
MM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
MM2Button.BorderColor3 = Color3.new(0, 0, 0)
MM2Button.Position = UDim2.new(0.04, 0, 0.225, 0)
MM2Button.Size = UDim2.new(0.45, 0, 0.08, 0)
MM2Button.Font = Enum.Font.SourceSans
MM2Button.Text = "MM2"
MM2Button.TextColor3 = Color3.new(0, 0, 0)
MM2Button.TextScaled = true
MM2Button.TextSize = 14
MM2Button.TextWrapped = true
MM2Button.Visible = false
Instance.new("UICorner", MM2Button)
Instance.new("UITextSizeConstraint", MM2Button).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", MM2Button).AspectRatio = 3.9473683834075928

local GhostMM2Button = Instance.new("TextButton")
GhostMM2Button.Name = "GhostMM2 Button"
GhostMM2Button.Parent = ScrollingFramePremium
GhostMM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
GhostMM2Button.BorderColor3 = Color3.new(0, 0, 0)
GhostMM2Button.Position = UDim2.new(0.5, 0, 0.225, 0)
GhostMM2Button.Size = UDim2.new(0.45, 0, 0.08, 0)
GhostMM2Button.Font = Enum.Font.SourceSans
GhostMM2Button.Text = "GhostMM2"
GhostMM2Button.TextColor3 = Color3.new(0, 0, 0)
GhostMM2Button.TextScaled = true
GhostMM2Button.TextSize = 14
GhostMM2Button.TextWrapped = true
GhostMM2Button.Visible = false
Instance.new("UICorner", GhostMM2Button)
Instance.new("UITextSizeConstraint", GhostMM2Button).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", GhostMM2Button).AspectRatio = 3.9473683834075928

local GAGButton = Instance.new("TextButton")
GAGButton.Name = "GAG Button"
GAGButton.Parent = ScrollingFramePremium
GAGButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
GAGButton.BorderColor3 = Color3.new(0, 0, 0)
GAGButton.Position = UDim2.new(0.04, 0, 0.325, 0)
GAGButton.Size = UDim2.new(0.45, 0, 0.08, 0)
GAGButton.Font = Enum.Font.SourceSans
GAGButton.Text = "GAG"
GAGButton.TextColor3 = Color3.new(0, 0, 0)
GAGButton.TextScaled = true
GAGButton.TextSize = 14
GAGButton.TextWrapped = true
GAGButton.Visible = false
Instance.new("UICorner", GAGButton)
Instance.new("UITextSizeConstraint", GAGButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", GAGButton).AspectRatio = 3.9473683834075928

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TitleLabel.BackgroundTransparency = 1
TitleLabel.BorderColor3 = Color3.new(0, 0, 0)
TitleLabel.BorderSizePixel = 0
TitleLabel.Position = UDim2.new(0.425298363, 0, 0.0153667927, 0)
TitleLabel.Size = UDim2.new(0.3616907, 0, 0.0724434555, 0)
TitleLabel.Font = Enum.Font.LuckiestGuy
TitleLabel.Text = "UNIVERSAL SCRIPTS"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextScaled = true
TitleLabel.TextSize = 14
TitleLabel.TextWrapped = true
Instance.new("UITextSizeConstraint", TitleLabel).MaxTextSize = 31
Instance.new("UIAspectRatioConstraint", TitleLabel).AspectRatio = 8.78787899017334

local ScrollingFrameHome = Instance.new("ScrollingFrame")
ScrollingFrameHome.Name = "ScrollingFrameHome"
ScrollingFrameHome.Parent = MainFrame
ScrollingFrameHome.Active = true
ScrollingFrameHome.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFrameHome.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFrameHome.BorderSizePixel = 0
ScrollingFrameHome.Position = UDim2.new(0.239610985, 0, 0.113314532, 0)
ScrollingFrameHome.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFrameHome.CanvasSize = UDim2.new(0,0,1.5,0)
Instance.new("UICorner", ScrollingFrameHome)
Instance.new("UIAspectRatioConstraint", ScrollingFrameHome).AspectRatio = 1.4926543235778809

local SpeedToolbutton = Instance.new("TextButton")
SpeedToolbutton.Name = "Speed Tool button"
SpeedToolbutton.Parent = ScrollingFrameHome
SpeedToolbutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpeedToolbutton.BorderColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.Position = UDim2.new(0.04, 0, 0.025, 0)
SpeedToolbutton.Size = UDim2.new(0.45, 0, 0.08, 0)
SpeedToolbutton.Font = Enum.Font.SourceSans
SpeedToolbutton.Text = "Speed Tool"
SpeedToolbutton.TextColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.TextScaled = true
SpeedToolbutton.TextSize = 14
SpeedToolbutton.TextWrapped = true
Instance.new("UICorner", SpeedToolbutton)
Instance.new("UITextSizeConstraint", SpeedToolbutton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", SpeedToolbutton).AspectRatio = 3.9473683834075928

local ClicktptoolButton = Instance.new("TextButton")
ClicktptoolButton.Name = "Click tp tool Button"
ClicktptoolButton.Parent = ScrollingFrameHome
ClicktptoolButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClicktptoolButton.BorderColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.Position = UDim2.new(0.5, 0, 0.025, 0)
ClicktptoolButton.Size = UDim2.new(0.45, 0, 0.08, 0)
ClicktptoolButton.Font = Enum.Font.SourceSans
ClicktptoolButton.Text = "Click tp tool"
ClicktptoolButton.TextColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.TextScaled = true
ClicktptoolButton.TextSize = 14
ClicktptoolButton.TextWrapped = true
Instance.new("UICorner", ClicktptoolButton)
Instance.new("UITextSizeConstraint", ClicktptoolButton).MaxTextSize = 35
Instance.new("UIAspectRatioConstraint", ClicktptoolButton).AspectRatio = 3.9473683834075928

local NoclipButton = Instance.new("TextButton")
NoclipButton.Name = "Noclip Button"
NoclipButton.Parent = ScrollingFrameHome
NoclipButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
NoclipButton.BorderColor3 = Color3.new(0, 0, 0)
NoclipButton.Position = UDim2.new(0.04, 0, 0.125, 0)
NoclipButton.Size = UDim2.new(0.45, 0, 0.08, 0)
NoclipButton.Font = Enum.Font.SourceSans
NoclipButton.Text = "Noclip"
NoclipButton.TextColor3 = Color3.new(0, 0, 0)
NoclipButton.TextScaled = true
NoclipButton.TextSize = 14
NoclipButton.TextWrapped = true
Instance.new("UICorner", NoclipButton)
Instance.new("UITextSizeConstraint", NoclipButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", NoclipButton).AspectRatio = 3.9473683834075928

local InfinityJumpButton = Instance.new("TextButton")
InfinityJumpButton.Name = "Infinity Jump Button"
InfinityJumpButton.Parent = ScrollingFrameHome
InfinityJumpButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
InfinityJumpButton.BorderColor3 = Color3.new(0, 0, 0)
InfinityJumpButton.Position = UDim2.new(0.5, 0, 0.125, 0)
InfinityJumpButton.Size = UDim2.new(0.45, 0, 0.08, 0)
InfinityJumpButton.Font = Enum.Font.SourceSans
InfinityJumpButton.Text = "Infinity Jump"
InfinityJumpButton.TextColor3 = Color3.new(0, 0, 0)
InfinityJumpButton.TextScaled = true
InfinityJumpButton.TextSize = 14
InfinityJumpButton.TextWrapped = true
Instance.new("UICorner", InfinityJumpButton)
Instance.new("UITextSizeConstraint", InfinityJumpButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", InfinityJumpButton).AspectRatio = 3.9473683834075928

local AntiFlingButton = Instance.new("TextButton")
AntiFlingButton.Name = "Anti-Fling Button"
AntiFlingButton.Parent = ScrollingFrameHome
AntiFlingButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
AntiFlingButton.BorderColor3 = Color3.new(0, 0, 0)
AntiFlingButton.Position = UDim2.new(0.04, 0, 0.225, 0)
AntiFlingButton.Size = UDim2.new(0.45, 0, 0.08, 0)
AntiFlingButton.Font = Enum.Font.SourceSans
AntiFlingButton.Text = "Anti-Fling"
AntiFlingButton.TextColor3 = Color3.new(0, 0, 0)
AntiFlingButton.TextScaled = true
AntiFlingButton.TextSize = 14
AntiFlingButton.TextWrapped = true
Instance.new("UICorner", AntiFlingButton)
Instance.new("UITextSizeConstraint", AntiFlingButton).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", AntiFlingButton).AspectRatio = 3.9473683834075928

local FlyButtonHome = Instance.new("TextButton")
FlyButtonHome.Name = "Fly Button Home" -- Nazwa nowego przycisku
FlyButtonHome.Parent = ScrollingFrameHome
FlyButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButtonHome.BorderColor3 = Color3.new(0, 0, 0)
FlyButtonHome.Position = UDim2.new(0.5, 0, 0.225, 0) -- Pozycja obok Anti-Fling
FlyButtonHome.Size = UDim2.new(0.45, 0, 0.08, 0)
FlyButtonHome.Font = Enum.Font.SourceSans
FlyButtonHome.Text = "Fly"
FlyButtonHome.TextColor3 = Color3.new(0, 0, 0)
FlyButtonHome.TextScaled = true
FlyButtonHome.TextSize = 14
FlyButtonHome.TextWrapped = true
Instance.new("UICorner", FlyButtonHome)
Instance.new("UITextSizeConstraint", FlyButtonHome).MaxTextSize = 37
Instance.new("UIAspectRatioConstraint", FlyButtonHome).AspectRatio = 3.9473683834075928

--- NOWE ELEMENTY GUI DLA ZAKŁADKI EXECUTOR ---
local ExecutorFrame = Instance.new("Frame")
ExecutorFrame.Name = "ExecutorFrame"
ExecutorFrame.Parent = MainFrame
ExecutorFrame.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ExecutorFrame.BorderColor3 = Color3.new(0, 0, 0)
ExecutorFrame.BorderSizePixel = 0
ExecutorFrame.Position = UDim2.new(0.239610985, 0, 0.113314532, 0)
ExecutorFrame.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ExecutorFrame.Visible = false
Instance.new("UICorner", ExecutorFrame)

local ExecutorLayout = Instance.new("UIListLayout")
ExecutorLayout.Parent = ExecutorFrame
ExecutorLayout.FillDirection = Enum.FillDirection.Vertical
ExecutorLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ExecutorLayout.Padding = UDim.new(0, 10)

local ExecutorTextBox = Instance.new("TextBox")
ExecutorTextBox.Name = "ExecutorTextBox"
ExecutorTextBox.Parent = ExecutorFrame
ExecutorTextBox.Size = UDim2.new(0.95, 0, 0.75, 0)
ExecutorTextBox.BackgroundColor3 = Color3.new(0.12, 0.12, 0.12)
ExecutorTextBox.BorderColor3 = Color3.new(0, 0, 0)
ExecutorTextBox.BorderSizePixel = 1
ExecutorTextBox.Font = Enum.Font.SourceSans
ExecutorTextBox.Text = "-- Wklej tutaj swój kod Lua"
ExecutorTextBox.TextColor3 = Color3.new(1, 1, 1)
ExecutorTextBox.TextSize = 18
ExecutorTextBox.TextWrapped = true
ExecutorTextBox.MultiLine = true
ExecutorTextBox.ClearTextOnFocus = true
ExecutorTextBox.PlaceholderText = "-- Wklej tutaj swój kod Lua"
Instance.new("UICorner", ExecutorTextBox)

local ExecutorButtonsFrame = Instance.new("Frame")
ExecutorButtonsFrame.Name = "ExecutorButtonsFrame"
ExecutorButtonsFrame.Parent = ExecutorFrame
ExecutorButtonsFrame.Size = UDim2.new(0.95, 0, 0.15, 0)
ExecutorButtonsFrame.BackgroundTransparency = 1
Instance.new("UIListLayout", ExecutorButtonsFrame).FillDirection = Enum.FillDirection.Horizontal
Instance.new("UIListLayout", ExecutorButtonsFrame).HorizontalAlignment = Enum.HorizontalAlignment.Center
Instance.new("UIListLayout", ExecutorButtonsFrame).Padding = UDim.new(0, 10)

local ExecuteButton = Instance.new("TextButton")
ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Parent = ExecutorButtonsFrame
ExecuteButton.Size = UDim2.new(0.48, 0, 1, 0)
ExecuteButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ExecuteButton.BorderColor3 = Color3.new(0, 0, 0)
ExecuteButton.Text = "Execute"
ExecuteButton.Font = Enum.Font.SourceSans
ExecuteButton.TextColor3 = Color3.new(0, 0, 0)
ExecuteButton.TextScaled = true
Instance.new("UICorner", ExecuteButton)

local ClearButton = Instance.new("TextButton")
ClearButton.Name = "ClearButton"
ClearButton.Parent = ExecutorButtonsFrame
ClearButton.Size = UDim2.new(0.48, 0, 1, 0)
ClearButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClearButton.BorderColor3 = Color3.new(0, 0, 0)
ClearButton.Text = "Clear"
ClearButton.Font = Enum.Font.SourceSans
ClearButton.TextColor3 = Color3.new(0, 0, 0)
ClearButton.TextScaled = true
Instance.new("UICorner", ClearButton)

--- ELEMENTY GUI DLA ZAKŁADKI UPDATE LOGS (RĘCZNE LOGI) ---
local UpdateLogsFrame = Instance.new("ScrollingFrame")
UpdateLogsFrame.Name = "UpdateLogsFrame"
UpdateLogsFrame.Parent = MainFrame
UpdateLogsFrame.Active = true
UpdateLogsFrame.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
UpdateLogsFrame.BorderColor3 = Color3.new(0, 0, 0)
UpdateLogsFrame.BorderSizePixel = 0
UpdateLogsFrame.Position = UDim2.new(0.239610985, 0, 0.113314532, 0)
UpdateLogsFrame.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
UpdateLogsFrame.Visible = false
UpdateLogsFrame.CanvasSize = UDim2.new(0,0,1.5,0) -- Dostosuj, jeśli logi będą bardzo długie
Instance.new("UICorner", UpdateLogsFrame)

local UpdateLogsText = Instance.new("TextLabel")
UpdateLogsText.Name = "UpdateLogsText"
UpdateLogsText.Parent = UpdateLogsFrame
UpdateLogsText.BackgroundColor3 = Color3.new(1, 1, 1)
UpdateLogsText.BackgroundTransparency = 1
UpdateLogsText.Position = UDim2.new(0.05, 0, 0.02, 0) -- Lekki margines
UpdateLogsText.Size = UDim2.new(0.9, 0, 0.96, 0) -- Pokryj większość ramki
UpdateLogsText.Font = Enum.Font.SourceSans
UpdateLogsText.TextXAlignment = Enum.TextXAlignment.Left
UpdateLogsText.TextYAlignment = Enum.TextYAlignment.Top
UpdateLogsText.Text = MANUAL_UPDATE_LOGS -- Tutaj wstawiamy ręcznie wpisane logi
UpdateLogsText.TextColor3 = Color3.new(1, 1, 1)
UpdateLogsText.TextScaled = false -- Ważne, aby tekst nie skalował się do ramki, tylko używał TextSize
UpdateLogsText.TextSize = 16 -- Stały rozmiar tekstu
UpdateLogsText.TextWrapped = true

Instance.new("UIAspectRatioConstraint", MainFrame).AspectRatio = 1.7601344585418701
Instance.new("UIAspectRatioConstraint", ScreenGui).AspectRatio = 1.9216867685317993

local HideButton = Instance.new("ImageButton")
HideButton.Name = "HideButton"
HideButton.Parent = ScreenGui
HideButton.BackgroundColor3 = Color3.new(1, 0, 0)
HideButton.BorderColor3 = Color3.new(0, 0, 0)
HideButton.BorderSizePixel = 3
HideButton.Image = "rbxassetid://102860171689689"
HideButton.ImageColor3 = Color3.new(1, 1, 1)
HideButton.ScaleType = Enum.ScaleType.Fit
HideButton.Position = UDim2.new(0.707863092, 0, 0.214006022, 0)
HideButton.Size = UDim2.new(0, 30, 0, 30)
HideButton.ZIndex = 5
HideButton.Draggable = true

--- Funkcje i logika skryptu ---

local function showTab(tabName)
    -- Ukryj wszystkie ramki treści
    ScrollingFrameHome.Visible = false
    ScrollingFramePremium.Visible = false
    ExecutorFrame.Visible = false
    UpdateLogsFrame.Visible = false

    -- Zresetuj kolory wszystkich przycisków zakładek
    HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
    PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
    ExecutorTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
    UpdateLogsTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)

    if tabName == "Home" then
        ScrollingFrameHome.Visible = true
        HomeTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
    elseif tabName == "Premium" then
        local success, result = pcall(function()
            return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
        end)

        if success then
            hasGamePass = result
            if hasGamePass then
                ScrollingFramePremium.Visible = true
                PremiumTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
                -- updateSpecialButtonVisibility() -- Wywołaj aktualizację widoczności po otwarciu Premium
            else
                sendNotification("Universal Scripts", "Nie posiadasz wersji premium. Teleportuję...")
                local teleportSuccess, teleportErr = pcall(function()
                    TeleportService:Teleport(TELEPORT_PLACE_ID, player)
                end)
                if not teleportSuccess then
                    warn("Błąd teleportacji przy braku GamePassa:", teleportErr)
                    sendNotification("Universal Scripts", "Błąd teleportacji: " .. tostring(teleportErr))
                end
                showTab("Home")
            end
        else
            warn("Błąd podczas sprawdzania wersji premium (showTab):", result)
            sendNotification("Universal Scripts", "Nie można sprawdzić statusu wersji premium. Spróbuj ponownie.")
            showTab("Home")
        end
    elseif tabName == "Executor" then
        ExecutorFrame.Visible = true
        ExecutorTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
    elseif tabName == "UpdateLogs" then
        UpdateLogsFrame.Visible = true
        UpdateLogsTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
    end
end

local function checkGamePassStatus()
    local success, result = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        hasGamePass = result
        if not initialGamePassCheckDone then
            if hasGamePass then
                sendNotification("Universal Scripts", "Posiadasz wersję premium! Funkcje Premium odblokowane.")
            else
                sendNotification("Universal Scripts", "Nie posiadasz wersji premium. Kliknij zakładkę Premium, aby przejść do zakupu.")
            end
            initialGamePassCheckDone = true
        end
    else
        warn("Błąd podczas sprawdzania wersji premium:", result)
        sendNotification("Universal Scripts", "Nie można sprawdzić statusu wersji premium. Spróbuj ponownie.")
    end
end

local function updateSpecialButtonVisibility()
    MM2Button.Visible = (game.PlaceId == MM2_EXPERIENCE_ID)
    GhostMM2Button.Visible = (game.PlaceId == MM2_EXPERIENCE_ID)
    GAGButton.Visible = (game.PlaceId == GAG_GAME_ID)
end

local function updateHideButtonPosition()
    if MainFrame.Visible then
        local frameAbsolutePosition = MainFrame.AbsolutePosition
        local frameAbsoluteSize = MainFrame.AbsoluteSize
        local xButtonSize = HideButton.AbsoluteSize

        local xOffsetFromFrameRight = 5
        local yOffsetFromFrameTop = 5

        local newX = frameAbsolutePosition.X + frameAbsoluteSize.X - xButtonSize.X - xOffsetFromFrameRight
        local newY = frameAbsolutePosition.Y + yOffsetFromFrameTop
        HideButton.Position = UDim2.fromOffset(newX, newY)

        lastHideButtonPosition = HideButton.Position
    else
        HideButton.Position = lastHideButtonPosition
    end
end

-- Obsługa przycisków zakładek
HomeTabButton.MouseButton1Click:Connect(function()
    showTab("Home")
end)

PremiumTabButton.MouseButton1Click:Connect(function()
    showTab("Premium")
end)

ExecutorTabButton.MouseButton1Click:Connect(function()
    showTab("Executor")
end)

UpdateLogsTabButton.MouseButton1Click:Connect(function()
    showTab("UpdateLogs")
end)

-- Obsługa przycisku ukrywania/pokazywania GUI
HideButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
    if MainFrame.Visible then
        HideButton.BackgroundColor3 = Color3.new(1, 0, 0) -- Czerwony, gdy GUI jest widoczne
    else
        HideButton.BackgroundColor3 = Color3.new(0, 1, 0) -- Zielony, gdy GUI jest ukryte
    end
end)

-- Executor Buttons
ExecuteButton.MouseButton1Click:Connect(function()
    local scriptToExecute = ExecutorTextBox.Text
    if scriptToExecute and scriptToExecute:len() > 0 then
        local success, err = pcall(function()
            -- WAŻNE: To jest `loadstring` dla executora
            local func = loadstring(scriptToExecute)
            if func then
                func()
                sendNotification("Universal Scripts", "Kod wykonany pomyślnie.")
            else
                sendNotification("Universal Scripts", "Błąd: Niepoprawna składnia Lua w executorze.")
            end
        end)
        if not success then
            sendNotification("Universal Scripts", "Błąd wykonania kodu z executora: " .. tostring(err))
        end
    else
        sendNotification("Universal Scripts", "Błąd: Brak kodu do wykonania w executorze.")
    end
end)

ClearButton.MouseButton1Click:Connect(function()
    ExecutorTextBox.Text = ""
    sendNotification("Universal Scripts", "Tekst w Executorze został wyczyszczony.")
end)

--- PRZYCISKI ŁADUJĄCE ZEWNĘTRZNE SKRYPTY Z LOADSTRING ---

-- Home Tab Buttons
SpeedToolbutton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/X7B0HPc2", SpeedToolbutton.Text)
end)

ClicktptoolButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/4KF2WJ9u", ClicktptoolButton.Text)
end)

-- Spectate w Home (teraz to jest samodzielny przycisk, nie premium)
-- Musisz zdecydować, czy chcesz Spectate jako osobną funkcję czy ładowany z URL.
-- Zakładam, że chcesz go w sekcji premium z URL. Jeśli nie, usuń ten komentarz i odkomentuj poniższy.
-- SpectateButton_Home.MouseButton1Click:Connect(function()
--     runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", "Spectate")
-- end)

NoclipButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/CnbYfaj1", NoclipButton.Text)
end)

-- Twoja logika fling była w Home (FlingButton), ale podałeś też FlingButton_Premium.
-- Jeśli chcesz, żeby fling był w Home i ładował z URL, odkomentuj poniższe:
-- FlingButton.MouseButton1Click:Connect(function()
--     runScriptAndNotify('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt', "Fling")
-- end)

InfinityJumpButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://raw.githubusercontent.com/majka323pl/universal-scripts/refs/heads/main/infinity-jump", InfinityJumpButton.Text)
end)

AntiFlingButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://raw.githubusercontent.com/majka323pl/universal-scripts/refs/heads/main/anty-fling", AntiFlingButton.Text)
end)

FlyButtonHome.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/xuSMWfDu", FlyButtonHome.Text)
end)

-- Premium Tab Buttons
SpectateButton_Premium.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript("https://pastebin.com/raw/UFVLWQRw", SpectateButton_Premium.Text)
end)

MM2Button.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring", MM2Button.Text)
end)

GhostMM2Button.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript("https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Murder%20Mystery", GhostMM2Button.Text)
end)

FlingButton_Premium.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt', FlingButton_Premium.Text)
end)

GAGButton.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript("https://raw.githubusercontent.com/ThundarZ/Welcome/main/Main/GaG/Main.lua", GAGButton.Text)
end)

FlyButtonPremium.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source", FlyButtonPremium.Text)
end)

Invisibiltybutton.MouseButton1Click:Connect(function()
    checkPremiumAndRunScript('https://pastebin.com/raw/3Rnd9rHf', Invisibiltybutton.Text)
end)

-- Obsługa zmiany widoczności MainFrame i MarketplaceService.PromptGamePassPurchaseFinished
MainFrame.VisibleChanged:Connect(function()
    updateHideButtonPosition()
end)

MarketplaceService.PromptGamePassPurchaseFinished:Connect(function(userId, gamePassId, wasPurchased)
    if userId == player.UserId and gamePassId == GAMEPASS_ID then
        if wasPurchased then
            sendNotification("Universal Scripts", "Wersja premium kupiona pomyślnie! Dziękujemy za zakup.")
            hasGamePass = true
            showTab("Premium")
        else
            sendNotification("Universal Scripts", "Anulowano zakup wersji premium.")
        end
        checkGamePassStatus()
    end
end)

-- Obsługa przeciągania przycisku HideButton
local dragStart
local startPos

HideButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragStart = input.Position
        startPos = HideButton.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragStart = nil
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragStart and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        HideButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Początkowe uruchomienie i powiadomienia
spawn(function()
    task.wait(1)
    sendNotification("Universal Scripts", "Witaj w Universal Scripts! Skrypt załadowany.")
    checkGamePassStatus()
    updateSpecialButtonVisibility() -- Upewnij się, że widoczność przycisków jest aktualizowana na starcie
    showTab("Home") -- Pokaż domyślną zakładkę
    updateHideButtonPosition()
end)

task.wait(0.5)
MainFrame.Visible = true

-- Obsługa zmiany miejsca (np. teleportacja, restart rundy)
game.Players.PlayerAdded:Connect(function(addedPlayer)
    if addedPlayer == player then
        -- Daj czas na załadowanie postaci po respawnie
        task.wait(1)
        updateSpecialButtonVisibility() -- Aktualizuj widoczność przycisków specyficznych dla gry
        -- Możesz też zresetować stan GUI do zakładki "Home"
        showTab("Home")
    end
end)

game.Loaded:Connect(function()
    updateSpecialButtonVisibility()
end)
