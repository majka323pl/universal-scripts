local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")

local GAMEPASS_ID = 1296972626
local MM2_EXPERIENCE_ID = 142823291
local TELEPORT_PLACE_ID = 6557073879 

local hasGamePass = false
local initialGamePassCheckDone = false

local lastHideButtonPosition = UDim2.new(1, -55, 0, 10)

-- Zmiana: Funkcja sendNotification wraca do oryginalnej formy
local function sendNotification(title, text)
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Icon = "rbxassetid://102860171689689",
        Duration = 5 -- Zachowano Duration = 5, jak w Twoim oryginalnym skrypcie dla wszystkich powiadomień.
    })
end

-- Deklaracje instancji GUI - Upewnij się, że są zgodne z Twoim oryginalnym działającym skryptem
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.Name = "UniversalScriptsGUI"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false
ScreenGui.Enabled = true

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.new(0.172549, 0.172549, 0.172549)
MainFrame.BorderColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.212787732, 0, 0.244107679, 0)
MainFrame.Size = UDim2.new(0.513162374, 0, 0.560262501, 0)
MainFrame.Draggable = true
MainFrame.Visible = true

local UICorner = Instance.new("UICorner")
UICorner.Parent = MainFrame

local TabsFrame = Instance.new("Frame")
TabsFrame.Name = "TabsFrame"
TabsFrame.Parent = MainFrame
TabsFrame.BackgroundColor3 = Color3.new(0.141176, 0.141176, 0.141176)
TabsFrame.BorderColor3 = Color3.new(0, 0, 0)
TabsFrame.BorderSizePixel = 0
TabsFrame.Position = UDim2.new(0, 0, 3.349695e-8, 0)
TabsFrame.Size = UDim2.new(0.21077837, 0, 0.998841524, 0)

local TabsFrame_UICorner = Instance.new("UICorner")
TabsFrame_UICorner.Parent = TabsFrame
local TabsFrame_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
TabsFrame_UIAspectRatioConstraint.Parent = TabsFrame
TabsFrame_UIAspectRatioConstraint.AspectRatio = 0.37142857909202576

local HomeTabButton = Instance.new("TextButton")
HomeTabButton.Name = "HomeTabButton"
HomeTabButton.Parent = TabsFrame
HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
HomeTabButton.BorderColor3 = Color3.new(0, 0, 0)
HomeTabButton.BorderSizePixel = 0
HomeTabButton.Position = UDim2.new(0.0591715984, 0, 0.112087913, 0)
HomeTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
HomeTabButton.Font = Enum.Font.SourceSans
HomeTabButton.Text = "Home"
HomeTabButton.TextColor3 = Color3.new(0, 0, 0)
HomeTabButton.TextScaled = true
HomeTabButton.TextSize = 14
HomeTabButton.TextWrapped = true

local HomeTabButton_UICorner = Instance.new("UICorner")
HomeTabButton_UICorner.Parent = HomeTabButton
local HomeTabButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
HomeTabButton_UITextSizeConstraint.Parent = HomeTabButton
HomeTabButton_UITextSizeConstraint.MaxTextSize = 37
local HomeTabButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
HomeTabButton_UIAspectRatioConstraint.Parent = HomeTabButton
HomeTabButton_UIAspectRatioConstraint.AspectRatio = 3.9210526943206787

local PremiumTabButton = Instance.new("TextButton")
PremiumTabButton.Name = "PremiumTabButton"
PremiumTabButton.Parent = TabsFrame
PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
PremiumTabButton.BorderColor3 = Color3.new(0, 0, 0)
PremiumTabButton.BorderSizePixel = 0
PremiumTabButton.Position = UDim2.new(0.0591715984, 0, 0.237362638, 0)
PremiumTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
PremiumTabButton.Font = Enum.Font.SourceSans
PremiumTabButton.Text = "Premium"
PremiumTabButton.TextColor3 = Color3.new(0, 0, 0)
PremiumTabButton.TextScaled = true
PremiumTabButton.TextSize = 14
PremiumTabButton.TextWrapped = true

local PremiumTabButton_UICorner = Instance.new("UICorner")
PremiumTabButton_UICorner.Parent = PremiumTabButton
local PremiumTabButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
PremiumTabButton_UITextSizeConstraint.Parent = PremiumTabButton
PremiumTabButton_UITextSizeConstraint.MaxTextSize = 37
local PremiumTabButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
PremiumTabButton_UIAspectRatioConstraint.Parent = PremiumTabButton
PremiumTabButton_UIAspectRatioConstraint.AspectRatio = 3.9210526943206787

-- NOWY: ExecutorTabButton
local ExecutorTabButton = Instance.new("TextButton")
ExecutorTabButton.Name = "ExecutorTabButton"
ExecutorTabButton.Parent = TabsFrame
ExecutorTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
ExecutorTabButton.BorderColor3 = Color3.new(0, 0, 0)
ExecutorTabButton.BorderSizePixel = 0
ExecutorTabButton.Position = UDim2.new(0.0591715984, 0, 0.36263737, 0) -- Pozycja pod PremiumTabButton
ExecutorTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
ExecutorTabButton.Font = Enum.Font.SourceSans
ExecutorTabButton.Text = "Executor"
ExecutorTabButton.TextColor3 = Color3.new(0, 0, 0)
ExecutorTabButton.TextScaled = true
ExecutorTabButton.TextSize = 14
ExecutorTabButton.TextWrapped = true

local ExecutorTabButton_UICorner = Instance.new("UICorner")
ExecutorTabButton_UICorner.Parent = ExecutorTabButton
local ExecutorTabButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
ExecutorTabButton_UITextSizeConstraint.Parent = ExecutorTabButton
ExecutorTabButton_UITextSizeConstraint.MaxTextSize = 37
local ExecutorTabButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
ExecutorTabButton_UIAspectRatioConstraint.Parent = ExecutorTabButton
ExecutorTabButton_UIAspectRatioConstraint.AspectRatio = 3.9210526943206787


local ScrollingFramePremium = Instance.new("ScrollingFrame")
ScrollingFramePremium.Name = "ScrollingFramePremium"
ScrollingFramePremium.Parent = MainFrame
ScrollingFramePremium.Active = true
ScrollingFramePremium.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFramePremium.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFramePremium.BorderSizePixel = 0
ScrollingFramePremium.Position = UDim2.new(0.239610985, 0, 0.1111193, 0)
ScrollingFramePremium.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFramePremium.CanvasSize = UDim2.new(0,0,1.5,0)
ScrollingFramePremium.Visible = false

local ScrollingFramePremium_UICorner = Instance.new("UICorner")
ScrollingFramePremium_UICorner.Parent = ScrollingFramePremium
local ScrollingFramePremium_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
ScrollingFramePremium_UIAspectRatioConstraint.Parent = ScrollingFramePremium
ScrollingFramePremium_UIAspectRatioConstraint.AspectRatio = 1.4926543235778809

local SpectateButton_Premium = Instance.new("TextButton")
SpectateButton_Premium.Name = "Spectate Button Premium"
SpectateButton_Premium.Parent = ScrollingFramePremium
SpectateButton_Premium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButton_Premium.BorderColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.Position = UDim2.new(0.353348672, 0, 0.0384799093, 0)
SpectateButton_Premium.Size = UDim2.new(0.28, 0, 0.06, 0)
SpectateButton_Premium.Font = Enum.Font.SourceSans
SpectateButton_Premium.Text = "Spectate"
SpectateButton_Premium.TextColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.TextScaled = true
SpectateButton_Premium.TextSize = 14
SpectateButton_Premium.TextWrapped = true

local SpectateButton_Premium_UICorner = Instance.new("UICorner")
SpectateButton_Premium_UICorner.Parent = SpectateButton_Premium
local SpectateButton_Premium_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
SpectateButton_Premium_UITextSizeConstraint.Parent = SpectateButton_Premium
SpectateButton_Premium_UITextSizeConstraint.MaxTextSize = 37
local SpectateButton_Premium_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
SpectateButton_Premium_UIAspectRatioConstraint.Parent = SpectateButton_Premium
SpectateButton_Premium_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928


local MM2Button = Instance.new("TextButton")
MM2Button.Name = "MM2 Button"
MM2Button.Parent = ScrollingFramePremium
MM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
MM2Button.BorderColor3 = Color3.new(0, 0, 0)
MM2Button.Position = UDim2.new(0.046162136, 0, 0.0384799093, 0)
MM2Button.Size = UDim2.new(0.28, 0, 0.06, 0)
MM2Button.Font = Enum.Font.SourceSans
MM2Button.Text = "MM2"
MM2Button.TextColor3 = Color3.new(0, 0, 0)
MM2Button.TextScaled = true
MM2Button.TextSize = 14
MM2Button.TextWrapped = true
MM2Button.Visible = false

local MM2Button_UICorner = Instance.new("UICorner")
MM2Button_UICorner.Parent = MM2Button
local MM2Button_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
MM2Button_UITextSizeConstraint.Parent = MM2Button
MM2Button_UITextSizeConstraint.MaxTextSize = 37
local MM2Button_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
MM2Button_UIAspectRatioConstraint.Parent = MM2Button
MM2Button_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928


local FlyButton = Instance.new("TextButton")
FlyButton.Name = "Console Button"
FlyButton.Parent = ScrollingFramePremium
FlyButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButton.BorderColor3 = Color3.new(0, 0, 0)
FlyButton.Position = UDim2.new(0.665799975, 0, 0.0384799093, 0)
FlyButton.Size = UDim2.new(0.28, 0, 0.06, 0)
FlyButton.Font = Enum.Font.SourceSans
FlyButton.Text = "Console"
FlyButton.TextColor3 = Color3.new(0, 0, 0)
FlyButton.TextScaled = true
FlyButton.TextSize = 14
FlyButton.TextWrapped = true

local FlyButton_UICorner = Instance.new("UICorner")
FlyButton_UICorner.Parent = FlyButton
local FlyButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
FlyButton_UITextSizeConstraint.Parent = FlyButton
FlyButton_UITextSizeConstraint.MaxTextSize = 37
local FlyButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
FlyButton_UIAspectRatioConstraint.Parent = FlyButton
FlyButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928


local Invisibiltybutton = Instance.new("TextButton")
Invisibiltybutton.Name = "Invisibilty Button"
Invisibiltybutton.Parent = ScrollingFramePremium
Invisibiltybutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
Invisibiltybutton.BorderColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.Position = UDim2.new(0.046162136, 0, 0.128796837, 0)
Invisibiltybutton.Size = UDim2.new(0.28, 0, 0.06, 0)
Invisibiltybutton.Font = Enum.Font.SourceSans
Invisibiltybutton.Text = "Invisibilty"
Invisibiltybutton.TextColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.TextScaled = true
Invisibiltybutton.TextSize = 14
Invisibiltybutton.TextWrapped = true

local Invisibiltybutton_UICorner = Instance.new("UICorner")
Invisibiltybutton_UICorner.Parent = Invisibiltybutton
local Invisibiltybutton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
Invisibiltybutton_UITextSizeConstraint.Parent = Invisibiltybutton
Invisibiltybutton_UITextSizeConstraint.MaxTextSize = 37
local Invisibiltybutton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
Invisibiltybutton_UIAspectRatioConstraint.Parent = Invisibiltybutton
Invisibiltybutton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928

-- NOWY GhostMM2Button
local GhostMM2Button = Instance.new("TextButton")
GhostMM2Button.Name = "GhostMM2 Button"
GhostMM2Button.Parent = ScrollingFramePremium
GhostMM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
GhostMM2Button.BorderColor3 = Color3.new(0, 0, 0)
GhostMM2Button.Position = UDim2.new(0.353348672, 0, 0.128796837, 0) -- Dostosuj pozycję jeśli używasz UIGridLayout
GhostMM2Button.Size = UDim2.new(0.28, 0, 0.06, 0)
GhostMM2Button.Font = Enum.Font.SourceSans
GhostMM2Button.Text = "GhostMM2"
GhostMM2Button.TextColor3 = Color3.new(0, 0, 0)
GhostMM2Button.TextScaled = true
GhostMM2Button.TextSize = 14
GhostMM2Button.TextWrapped = true
GhostMM2Button.Visible = false -- Domyślnie niewidoczny

local GhostMM2Button_UICorner = Instance.new("UICorner")
GhostMM2Button_UICorner.Parent = GhostMM2Button
local GhostMM2Button_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
GhostMM2Button_UITextSizeConstraint.Parent = GhostMM2Button
GhostMM2Button_UITextSizeConstraint.MaxTextSize = 37
local GhostMM2Button_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
GhostMM2Button_UIAspectRatioConstraint.Parent = GhostMM2Button
GhostMM2Button_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928


local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TitleLabel.BackgroundTransparency = 1
TitleLabel.BorderColor3 = Color3.new(0, 0, 0)
TitleLabel.BorderSizePixel = 0
TitleLabel.Position = UDim2.new(0.425298363, 0, 0.0153667927, 0)
TitleLabel.Size = UDim2.new(0.3616907, 0, 0.0724434555, 0)
TitleLabel.Font = Enum.Font.LuckiestGuy
TitleLabel.Text = "UNIVERSAL SCRIPTS"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextScaled = true
TitleLabel.TextSize = 14
TitleLabel.TextWrapped = true

local TitleLabel_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
TitleLabel_UITextSizeConstraint.Parent = TitleLabel
TitleLabel_UITextSizeConstraint.MaxTextSize = 31
local TitleLabel_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
TitleLabel_UIAspectRatioConstraint.Parent = TitleLabel
TitleLabel_UIAspectRatioConstraint.AspectRatio = 8.78787899017334

local ScrollingFrameHome = Instance.new("ScrollingFrame")
ScrollingFrameHome.Name = "ScrollingFrameHome"
ScrollingFrameHome.Parent = MainFrame
ScrollingFrameHome.Active = true
ScrollingFrameHome.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFrameHome.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFrameHome.BorderSizePixel = 0
ScrollingFrameHome.Position = UDim2.new(0.239610985, 0, 0.113314532, 0)
ScrollingFrameHome.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFrameHome.CanvasSize = UDim2.new(0,0,1.5,0)

local ScrollingFrameHome_UICorner = Instance.new("UICorner")
ScrollingFrameHome_UICorner.Parent = ScrollingFrameHome
local ScrollingFrameHome_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
ScrollingFrameHome_UIAspectRatioConstraint.Parent = ScrollingFrameHome
ScrollingFrameHome_UIAspectRatioConstraint.AspectRatio = 1.4926543235778809

local SpeedToolbutton = Instance.new("TextButton")
SpeedToolbutton.Name = "Speed Tool button"
SpeedToolbutton.Parent = ScrollingFrameHome
SpeedToolbutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpeedToolbutton.BorderColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.Position = UDim2.new(0.046162136, 0, 0.0384799093, 0)
SpeedToolbutton.Size = UDim2.new(0.28, 0, 0.06, 0)
SpeedToolbutton.Font = Enum.Font.SourceSans
SpeedToolbutton.Text = "Speed Tool"
SpeedToolbutton.TextColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.TextScaled = true
SpeedToolbutton.TextSize = 14
SpeedToolbutton.TextWrapped = true

local SpeedToolbutton_UICorner = Instance.new("UICorner")
SpeedToolbutton_UICorner.Parent = SpeedToolbutton
local SpeedToolbutton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
SpeedToolbutton_UITextSizeConstraint.Parent = SpeedToolbutton
SpeedToolbutton_UITextSizeConstraint.MaxTextSize = 37
local SpeedToolbutton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
SpeedToolbutton_UIAspectRatioConstraint.Parent = SpeedToolbutton
SpeedToolbutton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928

local ClicktptoolButton = Instance.new("TextButton")
ClicktptoolButton.Name = "Click tp tool Button"
ClicktptoolButton.Parent = ScrollingFrameHome
ClicktptoolButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClicktptoolButton.BorderColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.Position = UDim2.new(0.353348672, 0, 0.0384799093, 0)
ClicktptoolButton.Size = UDim2.new(0.28, 0, 0.06, 0)
ClicktptoolButton.Font = Enum.Font.SourceSans
ClicktptoolButton.Text = "Click tp tool"
ClicktptoolButton.TextColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.TextScaled = true
ClicktptoolButton.TextSize = 14
ClicktptoolButton.TextWrapped = true

local ClicktptoolButton_UICorner = Instance.new("UICorner")
ClicktptoolButton_UICorner.Parent = ClicktptoolButton
local ClicktptoolButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
ClicktptoolButton_UITextSizeConstraint.Parent = ClicktptoolButton
ClicktptoolButton_UITextSizeConstraint.MaxTextSize = 35
local ClicktptoolButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
ClicktptoolButton_UIAspectRatioConstraint.Parent = ClicktptoolButton
ClicktptoolButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928

local SpectateButton_Home = Instance.new("TextButton")
SpectateButton_Home.Name = "Spectate Button"
SpectateButton_Home.Parent = ScrollingFrameHome
SpectateButton_Home.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButton_Home.BorderColor3 = Color3.new(0, 0, 0)
SpectateButton_Home.Position = UDim2.new(0.665799975, 0, 0.0384799093, 0)
SpectateButton_Home.Size = UDim2.new(0.28, 0, 0.06, 0)
SpectateButton_Home.Font = Enum.Font.SourceSans
SpectateButton_Home.Text = "Spectate"
SpectateButton_Home.TextColor3 = Color3.new(0, 0, 0)
SpectateButton_Home.TextScaled = true
SpectateButton_Home.TextSize = 14
SpectateButton_Home.TextWrapped = true

local SpectateButton_Home_UICorner = Instance.new("UICorner")
SpectateButton_Home_UICorner.Parent = SpectateButton_Home
local SpectateButton_Home_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
SpectateButton_Home_UITextSizeConstraint.Parent = SpectateButton_Home
SpectateButton_Home_UITextSizeConstraint.MaxTextSize = 37
local SpectateButton_Home_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
SpectateButton_Home_UIAspectRatioConstraint.Parent = SpectateButton_Home
SpectateButton_Home_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928

local NoclipButton = Instance.new("TextButton")
NoclipButton.Name = "Noclip Button"
NoclipButton.Parent = ScrollingFrameHome
NoclipButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
NoclipButton.BorderColor3 = Color3.new(0, 0, 0)
NoclipButton.Position = UDim2.new(0.046162136, 0, 0.128796837, 0)
NoclipButton.Size = UDim2.new(0.28, 0, 0.06, 0)
NoclipButton.Font = Enum.Font.SourceSans
NoclipButton.Text = "Noclip"
NoclipButton.TextColor3 = Color3.new(0, 0, 0)
NoclipButton.TextScaled = true
NoclipButton.TextSize = 14
NoclipButton.TextWrapped = true

local NoclipButton_UICorner = Instance.new("UICorner")
NoclipButton_UICorner.Parent = NoclipButton
local NoclipButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
NoclipButton_UITextSizeConstraint.Parent = NoclipButton
NoclipButton_UITextSizeConstraint.MaxTextSize = 37
local NoclipButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
NoclipButton_UIAspectRatioConstraint.Parent = NoclipButton
NoclipButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928

local FlingButton = Instance.new("TextButton")
FlingButton.Name = "Fling Button"
FlingButton.Parent = ScrollingFrameHome
FlingButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlingButton.BorderColor3 = Color3.new(0, 0, 0)
FlingButton.Position = UDim2.new(0.353348672, 0, 0.128796837, 0)
FlingButton.Size = UDim2.new(0.28, 0, 0.06, 0)
FlingButton.Font = Enum.Font.SourceSans
FlingButton.Text = "Fling"
FlingButton.TextColor3 = Color3.new(0, 0, 0)
FlingButton.TextScaled = true
FlingButton.TextSize = 14
FlingButton.TextWrapped = true

local FlingButton_UICorner = Instance.new("UICorner")
FlingButton_UICorner.Parent = FlingButton
local FlingButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
FlingButton_UITextSizeConstraint.Parent = FlingButton
FlingButton_UITextSizeConstraint.MaxTextSize = 37
local FlingButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
FlingButton_UIAspectRatioConstraint.Parent = FlingButton
FlingButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928


local MainFrame_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
MainFrame_UIAspectRatioConstraint.Parent = MainFrame
MainFrame_UIAspectRatioConstraint.AspectRatio = 1.7601344585418701

local ScreenGui_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
ScreenGui_UIAspectRatioConstraint.Parent = ScreenGui
ScreenGui_UIAspectRatioConstraint.AspectRatio = 1.9216867685317993

local HideButton = Instance.new("ImageButton")
HideButton.Name = "HideButton"
HideButton.Parent = ScreenGui -- Zmieniono na ScreenGui
HideButton.BackgroundColor3 = Color3.new(1, 0, 0)
HideButton.BorderColor3 = Color3.new(0, 0, 0)
HideButton.BorderSizePixel = 3
HideButton.Image = "rbxassetid://102860171689689"
HideButton.ImageColor3 = Color3.new(1, 1, 1)
HideButton.ScaleType = Enum.ScaleType.Fit
HideButton.Position = UDim2.new(0.707863092, 0, 0.214006022, 0)
HideButton.Size = UDim2.new(0, 30, 0, 30)
HideButton.ZIndex = 5
HideButton.Draggable = true

-- NIE ZAPOMNIJ O TYM TITLELABEL, KTÓRY JEST ZDEKLAROWANY PODWÓJNIE W ORYGINALNYM SKRYPCIE
-- Zostawiam go tutaj, tak jak był w Twoim oryginalnym kodzie.
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TitleLabel.BackgroundTransparency = 1
TitleLabel.BorderColor3 = Color3.new(0, 0, 0)
TitleLabel.BorderSizePixel = 0
TitleLabel.Position = UDim2.new(0.425298363, 0, 0.0153667927, 0)
TitleLabel.Size = UDim2.new(0.3616907, 0, 0.0724434555, 0)
TitleLabel.Font = Enum.Font.LuckiestGuy
TitleLabel.Text = "UNIVERSAL SCRIPTS"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextScaled = true
TitleLabel.TextSize = 14
TitleLabel.TextWrapped = true

local TitleLabel_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
TitleLabel_UITextSizeConstraint.Parent = TitleLabel
TitleLabel_UITextSizeConstraint.MaxTextSize = 31
local TitleLabel_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
TitleLabel_UIAspectRatioConstraint.Parent = TitleLabel
TitleLabel_UIAspectRatioConstraint.AspectRatio = 8.78787899017334

--- NOWE ELEMENTY GUI DLA ZAKŁADKI EXECUTOR ---
local ExecutorFrame = Instance.new("Frame")
ExecutorFrame.Name = "ExecutorFrame"
ExecutorFrame.Parent = MainFrame
ExecutorFrame.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ExecutorFrame.BorderColor3 = Color3.new(0, 0, 0)
ExecutorFrame.BorderSizePixel = 0
ExecutorFrame.Position = UDim2.new(0.239610985, 0, 0.113314532, 0) -- Ta sama pozycja co Home/Premium ScrollingFrame
ExecutorFrame.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ExecutorFrame.Visible = false -- Domyślnie niewidoczny

local ExecutorFrame_UICorner = Instance.new("UICorner")
ExecutorFrame_UICorner.Parent = ExecutorFrame

local ExecutorLayout = Instance.new("UIListLayout") -- Używamy layoutu dla wewnętrznych elementów Executora
ExecutorLayout.Parent = ExecutorFrame
ExecutorLayout.FillDirection = Enum.FillDirection.Vertical
ExecutorLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ExecutorLayout.Padding = UDim.new(0, 10) -- 10 pikseli odstępu

local ExecutorTextBox = Instance.new("TextBox")
ExecutorTextBox.Name = "ExecutorTextBox"
ExecutorTextBox.Parent = ExecutorFrame
ExecutorTextBox.Size = UDim2.new(0.95, 0, 0.75, 0) -- 75% wysokości Executora
ExecutorTextBox.BackgroundColor3 = Color3.new(0.12, 0.12, 0.12)
ExecutorTextBox.BorderColor3 = Color3.new(0, 0, 0)
ExecutorTextBox.BorderSizePixel = 1
ExecutorTextBox.Font = Enum.Font.SourceSans
ExecutorTextBox.Text = "-- Wklej tutaj swój kod Lua"
ExecutorTextBox.TextColor3 = Color3.new(1, 1, 1)
ExecutorTextBox.TextSize = 18
ExecutorTextBox.TextWrapped = true
ExecutorTextBox.MultiLine = true
ExecutorTextBox.ClearTextOnFocus = true
ExecutorTextBox.PlaceholderText = "-- Wklej tutaj swój kod Lua"
Instance.new("UICorner", ExecutorTextBox) -- Zaokrąglone rogi

local ExecutorButtonsFrame = Instance.new("Frame")
ExecutorButtonsFrame.Name = "ExecutorButtonsFrame"
ExecutorButtonsFrame.Parent = ExecutorFrame
ExecutorButtonsFrame.Size = UDim2.new(0.95, 0, 0.15, 0) -- 15% wysokości Executora
ExecutorButtonsFrame.BackgroundTransparency = 1 -- Przezroczyste tło
Instance.new("UIListLayout", ExecutorButtonsFrame).FillDirection = Enum.FillDirection.Horizontal
Instance.new("UIListLayout", ExecutorButtonsFrame).HorizontalAlignment = Enum.HorizontalAlignment.Center
Instance.new("UIListLayout", ExecutorButtonsFrame).Padding = UDim.new(0, 10)

local ExecuteButton = Instance.new("TextButton")
ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Parent = ExecutorButtonsFrame
ExecuteButton.Size = UDim2.new(0.48, 0, 1, 0) -- 48% szerokości ramki, cała wysokość
ExecuteButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ExecuteButton.BorderColor3 = Color3.new(0, 0, 0)
ExecuteButton.Text = "Execute"
ExecuteButton.Font = Enum.Font.SourceSans
ExecuteButton.TextColor3 = Color3.new(0, 0, 0)
ExecuteButton.TextScaled = true
Instance.new("UICorner", ExecuteButton)

local ClearButton = Instance.new("TextButton")
ClearButton.Name = "ClearButton"
ClearButton.Parent = ExecutorButtonsFrame
ClearButton.Size = UDim2.new(0.48, 0, 1, 0) -- 48% szerokości ramki, cała wysokość
ClearButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClearButton.BorderColor3 = Color3.new(0, 0, 0)
ClearButton.Text = "Clear"
ClearButton.Font = Enum.Font.SourceSans
ClearButton.TextColor3 = Color3.new(0, 0, 0)
ClearButton.TextScaled = true
Instance.new("UICorner", ClearButton)


--- Funkcje i logika skryptu ---

local function showTab(tabName)
    ScrollingFrameHome.Visible = false
    ScrollingFramePremium.Visible = false
    ExecutorFrame.Visible = false -- Ukryj nową ramkę Executora

    -- Zresetuj kolory wszystkich przycisków zakładek
    HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
    PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
    ExecutorTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)

    if tabName == "Home" then
        ScrollingFrameHome.Visible = true
        HomeTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5) -- Podświetlony
    elseif tabName == "Premium" then
        local success, result = pcall(function()
            return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
        end)

        if success then
            hasGamePass = result
            if hasGamePass then
                ScrollingFramePremium.Visible = true
                PremiumTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5) -- Podświetlony
                if not initialGamePassCheckDone then
                    sendNotification("Universal Scripts", "Wersja premium aktywowana.")
                    initialGamePassCheckDone = true
                end
            else
                sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby uzyskać dostęp do tej zakładki!")
                MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID) 
            end
        else
            warn("Błąd podczas sprawdzania wersji premium (showTab):", result)
            sendNotification("Universal Scripts", "Nie można sprawdzić statusu wersji premium. Spróbuj ponownie.")
        end
    elseif tabName == "Executor" then
        ExecutorFrame.Visible = true
        ExecutorTabButton.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5) -- Podświetlony
        sendNotification("Universal Scripts", "Przeszedłeś do zakładki Executor. Wklej kod i naciśnij Execute.")
    end
end

local function checkGamePassStatus()
    local success, result = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        hasGamePass = result
        if not initialGamePassCheckDone then
            if hasGamePass then
                sendNotification("Universal Scripts", "Posiadasz wersję premium! Funkcje Premium odblokowane.")
            else
                sendNotification("Universal Scripts", "Nie posiadasz wersji premium. Kliknij zakładkę Premium, aby przejść do zakupu.")
            end
            initialGamePassCheckDone = true
        end
    else
        warn("Błąd podczas sprawdzania wersji premium:", result)
        sendNotification("Universal Scripts", "Nie można sprawdzić statusu wersji premium. Spróbuj ponownie.")
    end
end

-- Zmieniona funkcja updateMM2ButtonVisibility
local function updateMM2ButtonVisibility()
    if game.PlaceId == MM2_EXPERIENCE_ID then
        MM2Button.Visible = true
        GhostMM2Button.Visible = true 
    else
        MM2Button.Visible = false
        GhostMM2Button.Visible = false
    end
end

local function updateHideButtonPosition()
    if MainFrame.Visible then
        local frameAbsolutePosition = MainFrame.AbsolutePosition
        local frameAbsoluteSize = MainFrame.AbsoluteSize
        local xButtonSize = HideButton.AbsoluteSize

        local xOffsetFromFrameRight = 5
        local yOffsetFromFrameTop = 5

        local newX = frameAbsolutePosition.X + frameAbsoluteSize.X - xButtonSize.X - xOffsetFromFrameRight
        local newY = frameAbsolutePosition.Y + yOffsetFromFrameTop
        HideButton.Position = UDim2.fromOffset(newX, newY)

        lastHideButtonPosition = HideButton.Position
    else
        HideButton.Position = lastHideButtonPosition
    end
end

local function runScriptAndNotify(url, buttonName)
    local scriptContent = nil
    local successHttpGet, errHttpGet = pcall(function()
        scriptContent = game:HttpGet(url)
    end)

    if not successHttpGet then
        sendNotification("Universal Scripts", "Błąd pobierania skryptu '" .. buttonName .. "': " .. tostring(errHttpGet))
        warn("Błąd HTTP pobierania skryptu '" .. buttonName .. "':", errHttpGet)
        return
    end

    if not scriptContent or #scriptContent == 0 then
        sendNotification("Universal Scripts", "Pobrany skrypt '" .. buttonName .. "' jest pusty lub nieprawidłowy.")
        warn("Pobrany skrypt '" .. buttonName .. "' jest pusty.")
        return
    end

    local func, loadErr = loadstring(scriptContent)
    if not func then
        sendNotification("Universal Scripts", "Błąd parsowania skryptu '" .. buttonName .. "': " .. tostring(loadErr))
        warn("Błąd loadstring dla skryptu '" .. buttonName .. "':", loadErr)
        return
    end

    local successRun, runErr = pcall(func)
    if successRun then
        sendNotification("Universal Scripts", "Skrypt '" .. buttonName .. "' załadowany i uruchomiony!")
    else
        sendNotification("Universal Scripts", "Błąd uruchamiania skryptu '" .. buttonName .. "': " .. tostring(runErr))
        warn("Błąd wykonania skryptu '" .. buttonName .. "':", runErr)
    end
end

-- Połączenia przycisków Home
SpeedToolbutton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/X7B0HPc2", SpeedToolbutton.Text)
end)

ClicktptoolButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/4KF2WJ9u", ClicktptoolButton.Text)
end)

SpectateButton_Home.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", SpectateButton_Home.Text)
end)

NoclipButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/CnbYfaj1", NoclipButton.Text)
end)

FlingButton.MouseButton1Click:Connect(function()
    runScriptAndNotify('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt', FlingButton.Text)
end)

-- Połączenia przycisków Premium
local function runPremiumScript(url, buttonName)
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify(url, buttonName)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (" .. buttonName .. "):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end

SpectateButton_Premium.MouseButton1Click:Connect(function()
    runPremiumScript("https://pastebin.com/raw/UFVLWQRw", SpectateButton_Premium.Text)
end)

MM2Button.MouseButton1Click:Connect(function()
    runPremiumScript("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring", MM2Button.Text)
end)

FlyButton.MouseButton1Click:Connect(function()
    runPremiumScript("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source", FlyButton.Text)
end)

Invisibiltybutton.MouseButton1Click:Connect(function()
    runPremiumScript('https://pastebin.com/raw/3Rnd9rHf', Invisibiltybutton.Text)
end)

GhostMM2Button.MouseButton1Click:Connect(function()
    runPremiumScript("https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Murder%20Mystery", GhostMM2Button.Text)
end)

-- NOWA LOGIKA DLA PRZYCISKÓW EXECUTORA
ExecuteButton.MouseButton1Click:Connect(function()
    local codeToExecute = ExecutorTextBox.Text -- Pobierz tekst (kod) z pola tekstowego

    if codeToExecute and codeToExecute ~= "" and codeToExecute ~= "-- Wklej tutaj swój kod Lua" then
        local success, errorMessage = pcall(function()
            local func = loadstring(codeToExecute) -- Kompiluje tekst jako funkcję Lua
            
            if func then
                func() -- Wykonaj skompilowany kod
                sendNotification("Universal Scripts", "Kod wykonany pomyślnie!") -- Zmieniono na Universal Scripts
            else
                sendNotification("Universal Scripts", "Błąd składni w kodzie. Sprawdź konsolę Output.") -- Zmieniono na Universal Scripts, usunięto duration
                warn("Błąd składni w kodzie (loadstring):", errorMessage)
            end
        end)

        if not success then
            sendNotification("Universal Scripts", "Wystąpił błąd podczas wykonywania kodu: " .. tostring(errorMessage) .. ". Sprawdź konsolę Output.") -- Zmieniono na Universal Scripts, usunięto duration
            warn("Błąd podczas wykonywania kodu:", errorMessage)
        end
    else
        sendNotification("Universal Scripts", "Pole tekstowe jest puste. Wpisz jakiś kod do wykonania.") -- Zmieniono na Universal Scripts, usunięto duration
    end
end)

ClearButton.MouseButton1Click:Connect(function()
    ExecutorTextBox.Text = ""
    sendNotification("Universal Scripts", "Pole tekstowe wyczyszczone.") -- Zmieniono na Universal Scripts
end)


-- Połączenia zakładek i ukrywania/pokazywania GUI
HomeTabButton.MouseButton1Click:Connect(function()
    showTab("Home")
end)

PremiumTabButton.MouseButton1Click:Connect(function()
    showTab("Premium")
end)

ExecutorTabButton.MouseButton1Click:Connect(function()
    showTab("Executor")
end)

HideButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

MainFrame.VisibleChanged:Connect(function()
    updateHideButtonPosition()
end)

HideButton.Changed:Connect(function(property)
    if property == "Position" then
        if not MainFrame.Visible then
            lastHideButtonPosition = HideButton.Position
        end
    end
end)

-- Aktualizacja pozycji HideButton w każdej klatce (dla płynnego śledzenia przeciągania)
RunService.RenderStepped:Connect(updateHideButtonPosition)

-- Logika dla zmiany PlaceId i GamePassa
local lastPlaceId = game.PlaceId
RunService.Stepped:Connect(function()
    if game.PlaceId ~= lastPlaceId then
        lastPlaceId = game.PlaceId
        updateMM2ButtonVisibility()
        -- WAŻNE: Jeśli zakładka premium była aktywna i zmieniono grę,
        -- a przyciski MM2/GhostMM2 miałyby zniknąć, przełącz na zakładkę Home.
        -- To zapobiegnie sytuacji, gdzie użytkownik widzi pustą zakładkę Premium.
        if ScrollingFramePremium.Visible and not (MM2Button.Visible or GhostMM2Button.Visible) then
            showTab("Home") 
            sendNotification("Universal Scripts", "Zmieniono grę. Zakładka Premium przełączona na Home, aby odświeżyć widoczność przycisków.")
        end
    end
end)

-- Dodatkowe sprawdzenia po załadowaniu postaci i gry
player.CharacterAdded:Connect(function()
    updateMM2ButtonVisibility()
end)

game.Loaded:Connect(function()
    updateMM2ButtonVisibility()
end)

MarketplaceService.PromptGamePassPurchaseFinished:Connect(function(userId, gamePassId, wasPurchased)
    if userId == player.UserId and gamePassId == GAMEPASS_ID then
        if wasPurchased then
            sendNotification("Universal Scripts", "Wersja premium kupiona pomyślnie! Dziękujemy za zakup.")
            hasGamePass = true
            showTab("Premium")
        else
            sendNotification("Universal Scripts", "Anulowano zakup wersji premium.")
        end
    end
end)

-- Główna funkcja startowa uruchamiana po załadowaniu PlayerGui
spawn(function()
    player.PlayerGui.ChildAdded:Wait() -- Czekaj, aż PlayerGui zostanie w pełni załadowane
    task.wait(1) -- Krótkie opóźnienie dla pewności
    sendNotification("Universal Scripts", "Witaj w Universal Scripts! Skrypt załadowany.")
    checkGamePassStatus()
    updateMM2ButtonVisibility()
    showTab("Home") -- Domyślnie pokaż zakładkę Home
    updateHideButtonPosition() -- Ustaw początkową pozycję przycisku Hide
end)

print("Universal Scripts z Executorem załadowany i gotowy do działania.")
